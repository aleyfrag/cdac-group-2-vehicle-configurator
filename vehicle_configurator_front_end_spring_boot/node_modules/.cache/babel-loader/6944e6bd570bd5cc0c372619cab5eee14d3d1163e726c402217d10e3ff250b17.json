{"ast":null,"code":"import React,{useState,useContext}from\"react\";import{AuthContext}from\"../Contexts/AuthContext\";import{Alert}from'react-st-modal';import ForgotPasswordForm from'./ForgotPasswordForm';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function SignInForm(){const[state,setState]=useState({});const[showForgotPassword,setShowForgotPassword]=useState(false);const{setIsLogged}=useContext(AuthContext);const handleChange=evt=>{const value=evt.target.value;setState({...state,[evt.target.name]:value});};const handleOnSubmit=evt=>{evt.preventDefault();fetch(\"\".concat(process.env.REACT_APP_BASE_URL,\"/api/login\"),{method:\"post\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(state)}).then(response=>{console.log(response);return response.json();}).then(loginSuccess=>{console.log(\"Login success==>:\",loginSuccess);loginSuccess&&setIsLogged(true);if(loginSuccess)Alert('Welcome ${state.username}');else Alert('INVALID ENTRY');}).catch(error=>{console.error(\"Login failed:\",error);});const{username,password}=state;for(const key in state){setState({...state,[key]:\"\"});}fetch(\"\".concat(process.env.REACT_APP_BASE_URL,\"/api/\")+username,{headers:{\"Content-Type\":\"application/json\"}}).then(response=>{console.log(response);return response.json();}).then(data=>{localStorage.setItem(\"userId\",data);console.log(\"data==>\",data);}).catch(error=>{console.error(\"Login failed:\",error);});};return/*#__PURE__*/_jsx(\"div\",{className:\"form-container sign-in-container\",children:showForgotPassword?/*#__PURE__*/_jsx(ForgotPasswordForm,{onClose:()=>setShowForgotPassword(false)}):/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleOnSubmit,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Sign in\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"username\",placeholder:\"Enter Username\",onChange:handleChange}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",placeholder:\"Enter Password\",onChange:handleChange}),/*#__PURE__*/_jsx(\"a\",{onClick:()=>setShowForgotPassword(true),children:\"Forgot your password?\"}),/*#__PURE__*/_jsx(\"button\",{children:\"Sign In\"})]})});}export default SignInForm;","map":{"version":3,"names":["React","useState","useContext","AuthContext","Alert","ForgotPasswordForm","jsx","_jsx","jsxs","_jsxs","SignInForm","state","setState","showForgotPassword","setShowForgotPassword","setIsLogged","handleChange","evt","value","target","name","handleOnSubmit","preventDefault","fetch","concat","process","env","REACT_APP_BASE_URL","method","headers","body","JSON","stringify","then","response","console","log","json","loginSuccess","catch","error","username","password","key","data","localStorage","setItem","className","children","onClose","onSubmit","type","placeholder","onChange","onClick"],"sources":["/Users/ashitosh/Documents/cdac-group2-vehicle-configurator-master/vehicle_configurator_front_end_spring_boot/src/components/SignInForm.jsx"],"sourcesContent":["import React, { useState, useContext } from \"react\";\r\nimport { AuthContext } from \"../Contexts/AuthContext\";\r\nimport { Alert } from 'react-st-modal';\r\nimport ForgotPasswordForm from './ForgotPasswordForm';\r\n\r\nfunction SignInForm() {\r\n  const [state, setState] = useState({});\r\n  const [showForgotPassword, setShowForgotPassword] = useState(false);\r\n  const { setIsLogged } = useContext(AuthContext);\r\n\r\n  const handleChange = (evt) => {\r\n    const value = evt.target.value;\r\n    setState({\r\n      ...state,\r\n      [evt.target.name]: value,\r\n    });\r\n  };\r\n\r\n  const handleOnSubmit = (evt) => {\r\n    evt.preventDefault();\r\n\r\n    fetch(`${process.env.REACT_APP_BASE_URL}/api/login`, {\r\n      method: \"post\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(state),\r\n    })\r\n      .then((response) => {\r\n        console.log(response);\r\n        return response.json();\r\n      })\r\n      .then((loginSuccess) => {\r\n        console.log(\"Login success==>:\", loginSuccess);\r\n\r\n        loginSuccess && setIsLogged(true);\r\n        if (loginSuccess) Alert('Welcome ${state.username}');\r\n        else Alert('INVALID ENTRY');\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"Login failed:\", error);\r\n      });\r\n\r\n    const { username, password } = state;\r\n\r\n    for (const key in state) {\r\n      setState({\r\n        ...state,\r\n        [key]: \"\",\r\n      });\r\n    }\r\n\r\n    fetch(`${process.env.REACT_APP_BASE_URL}/api/` + username, {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    })\r\n      .then((response) => {\r\n        console.log(response);\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        localStorage.setItem(\"userId\", data);\r\n        console.log(\"data==>\", data);\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"Login failed:\", error);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className=\"form-container sign-in-container\">\r\n      {showForgotPassword ? (\r\n        <ForgotPasswordForm onClose={() => setShowForgotPassword(false)} />\r\n      ) : (\r\n        <form onSubmit={handleOnSubmit}>\r\n          <h1>Sign in</h1>\r\n          <br />\r\n          <input\r\n            type=\"text\"\r\n            name=\"username\"\r\n            placeholder=\"Enter Username\"\r\n            onChange={handleChange}\r\n          />\r\n          <input\r\n            type=\"password\"\r\n            name=\"password\"\r\n            placeholder=\"Enter Password\"\r\n            onChange={handleChange}\r\n          />\r\n          <a onClick={() => setShowForgotPassword(true)}>Forgot your password?</a>\r\n          <button>Sign In</button>\r\n        </form>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SignInForm;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}