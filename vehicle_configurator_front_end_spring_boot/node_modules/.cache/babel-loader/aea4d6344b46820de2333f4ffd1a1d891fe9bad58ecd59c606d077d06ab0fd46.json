{"ast":null,"code":"import React,{useState,useContext}from\"react\";import{Button,Form,Alert}from\"react-bootstrap\";import{useNavigate}from\"react-router-dom\";import{ResetContext}from\"../Contexts/ResetContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function SendInvoiceViaEmail(props){const[recipient,setRecipient]=useState(\"\");const[showSuccessMessage,setShowSuccessMessage]=useState(false);const[errorMessage,setErrorMessage]=useState(\"\");const navigate=useNavigate();const{segmentSelectedTop,setSegmentSelectedTop}=useContext(ResetContext);let invoicePath=sessionStorage.getItem(\"invoicePath\");const handleSubmit=async e=>{e.preventDefault();console.log(\"Recipient:\",recipient);console.log(\"Invoice path:\",invoicePath);try{const response=await fetch(\"\".concat(process.env.REACT_APP_BASE_URL,\"/api/sendMailWithAttachment\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({recipient:recipient,msgBody:\"Please find the attached invoice.\",name:\"Vehicle Configurator\",attachment:\"C:\\\\Users\\\\Acer_Owner\\\\Downloads\\\\\".concat(invoicePath)})});// try {\n//   const response = await fetch(\n//     \"http://localhost:3000/send-email\",\n//     {\n//       method: \"POST\",\n//       headers: {\n//         \"Content-Type\": \"application/json\",\n//       },\n//       body: JSON.stringify({\n//         recipient: recipient,\n//         msgBody: \"Please find the attached invoice.\",\n//         name: \"Vehicle Configurator\",\n//         attachment: `C:\\\\Users\\\\Acer_Owner\\\\Downloads\\\\${invoicePath}`,\n//       }),\n//     }\n//   );\nconsole.log(\"Response:\",response);if(!response.ok){console.error(\"Failed to send email\");throw new Error(\"Failed to send email\");}setShowSuccessMessage(true);// Navigate back to configurator after 2 seconds\nsetTimeout(()=>{setSegmentSelectedTop(segmentSelectedTop+1);alert(\"Email sent successfully!\");setSegmentSelectedTop(segmentSelectedTop+1);navigate(\"/\");},500);}catch(error){console.error(\"Error sending email:\",error);setErrorMessage(\"Failed to send email. Please try again later.\");}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"center\",{children:/*#__PURE__*/_jsx(\"h3\",{children:\"Send Invoice via Email\"})}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Form.Group,{controlId:\"recipient\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Recipient Email\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",value:recipient,onChange:e=>setRecipient(e.target.value),required:true})]}),/*#__PURE__*/_jsx(Button,{style:{backgroundColor:\"ea6995\",border:\"1px solid #ea6995\"},type:\"submit\",children:\"Send\"})]}),errorMessage&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",style:{marginTop:\"20px\"},children:errorMessage}),showSuccessMessage&&/*#__PURE__*/_jsx(Alert,{variant:\"success\",style:{marginTop:\"20px\"},children:\"Email sent successfully!\"})]});}export default SendInvoiceViaEmail;","map":{"version":3,"names":["React","useState","useContext","Button","Form","Alert","useNavigate","ResetContext","jsx","_jsx","jsxs","_jsxs","SendInvoiceViaEmail","props","recipient","setRecipient","showSuccessMessage","setShowSuccessMessage","errorMessage","setErrorMessage","navigate","segmentSelectedTop","setSegmentSelectedTop","invoicePath","sessionStorage","getItem","handleSubmit","e","preventDefault","console","log","response","fetch","concat","process","env","REACT_APP_BASE_URL","method","headers","body","JSON","stringify","msgBody","name","attachment","ok","error","Error","setTimeout","alert","children","onSubmit","Group","controlId","Label","Control","type","value","onChange","target","required","style","backgroundColor","border","variant","marginTop"],"sources":["/Users/ashitosh/Documents/cdac-group2-vehicle-configurator-master/vehicle_configurator_front_end_spring_boot/src/components/SendInvoiceViaEmail.jsx"],"sourcesContent":["import React, { useState, useContext } from \"react\";\r\nimport { Button, Form, Alert } from \"react-bootstrap\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { ResetContext } from \"../Contexts/ResetContext\";\r\n\r\nfunction SendInvoiceViaEmail(props) {\r\n  const [recipient, setRecipient] = useState(\"\");\r\n  const [showSuccessMessage, setShowSuccessMessage] = useState(false);\r\n  const [errorMessage, setErrorMessage] = useState(\"\");\r\n  const navigate = useNavigate();\r\n  const { segmentSelectedTop, setSegmentSelectedTop } =\r\n    useContext(ResetContext);\r\n  let invoicePath = sessionStorage.getItem(\"invoicePath\");\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    console.log(\"Recipient:\", recipient);\r\n    console.log(\"Invoice path:\", invoicePath);\r\n\r\n    try {\r\n      const response = await fetch(\r\n        `${process.env.REACT_APP_BASE_URL}/api/sendMailWithAttachment`,\r\n        {\r\n          method: \"POST\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          body: JSON.stringify({\r\n            recipient: recipient,\r\n            msgBody: \"Please find the attached invoice.\",\r\n            name: \"Vehicle Configurator\",\r\n            attachment: `C:\\\\Users\\\\Acer_Owner\\\\Downloads\\\\${invoicePath}`,\r\n          }),\r\n        }\r\n      );\r\n    // try {\r\n    //   const response = await fetch(\r\n    //     \"http://localhost:3000/send-email\",\r\n    //     {\r\n    //       method: \"POST\",\r\n    //       headers: {\r\n    //         \"Content-Type\": \"application/json\",\r\n    //       },\r\n    //       body: JSON.stringify({\r\n    //         recipient: recipient,\r\n    //         msgBody: \"Please find the attached invoice.\",\r\n    //         name: \"Vehicle Configurator\",\r\n    //         attachment: `C:\\\\Users\\\\Acer_Owner\\\\Downloads\\\\${invoicePath}`,\r\n    //       }),\r\n    //     }\r\n    //   );\r\n\r\n      console.log(\"Response:\", response);\r\n\r\n      if (!response.ok) {\r\n        console.error(\"Failed to send email\");\r\n        throw new Error(\"Failed to send email\");\r\n      }\r\n\r\n      setShowSuccessMessage(true);\r\n\r\n      // Navigate back to configurator after 2 seconds\r\n      setTimeout(() => {\r\n        setSegmentSelectedTop(segmentSelectedTop + 1);\r\n        alert(\"Email sent successfully!\");\r\n        setSegmentSelectedTop(segmentSelectedTop + 1);\r\n        navigate(\"/\");\r\n      }, 500);\r\n    } catch (error) {\r\n      console.error(\"Error sending email:\", error);\r\n      setErrorMessage(\"Failed to send email. Please try again later.\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <center><h3>Send Invoice via Email</h3></center>\r\n      <Form onSubmit={handleSubmit}>\r\n        <Form.Group controlId=\"recipient\">\r\n          <Form.Label>Recipient Email</Form.Label>\r\n          <Form.Control\r\n            type=\"email\"\r\n            value={recipient}\r\n            onChange={(e) => setRecipient(e.target.value)}\r\n            required\r\n          />\r\n        </Form.Group>\r\n        <Button style={{backgroundColor:\"ea6995\",border:\"1px solid #ea6995\"}} type=\"submit\">\r\n          Send\r\n        </Button>\r\n      </Form>\r\n      {/* Error message */}\r\n      {errorMessage && (\r\n        <Alert variant=\"danger\" style={{ marginTop: \"20px\" }}>\r\n          {errorMessage}\r\n        </Alert>\r\n      )}\r\n      {/* Success message */}\r\n      {showSuccessMessage && (\r\n        <Alert variant=\"success\" style={{ marginTop: \"20px\" }}>\r\n          Email sent successfully!\r\n        </Alert>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SendInvoiceViaEmail;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}